<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantasy Football Draft Assistant V2</title>
    
    <!-- Shoelace CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.15.1/cdn/themes/light.css" />
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/landing.css">
    <link rel="stylesheet" href="/css/draft.css">
    
    <!-- Shoelace JS -->
    <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.15.1/cdn/shoelace-autoloader.js"></script>
</head>
<body>
    <!-- Main App Container -->
    <div id="app">
        <!-- Landing Page -->
        <div id="landing-section" class="landing-section">
            <!-- Header -->
            <div class="landing-header">
                <div class="header-content">
                    <div class="logo-section">
                        <div class="logo">
                            <sl-icon name="trophy-fill" class="logo-icon"></sl-icon>
                            <h1>Fantasy Football Draft Assistant</h1>
                        </div>
                        <p class="tagline">Your ultimate draft companion for Sleeper leagues</p>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="landing-content">
                <!-- Tab Navigation -->
                <div class="tab-navigation">
                    <button class="tab-button active" data-tab="leagues">
                        <sl-icon name="people-fill"></sl-icon>
                        <span>My Leagues</span>
                    </button>
                    <button class="tab-button" data-tab="mock">
                        <sl-icon name="play-circle-fill"></sl-icon>
                        <span>Mock Draft</span>
                    </button>
                </div>

                <!-- Tab Content -->
                <div class="tab-content">
                    <!-- My Leagues Tab -->
                    <div id="leagues-tab" class="tab-pane active">
                        <!-- User Search Section -->
                        <div class="user-search-section">
                            <div class="search-container">
                                <div class="search-header">
                                    <h2>Find Your Leagues</h2>
                                    <p>Enter your Sleeper username to load your leagues</p>
                                </div>
                                
                                <form id="user-search-form" class="search-form">
                                    <div class="input-group">
                                        <sl-input 
                                            id="username-input" 
                                            placeholder="Enter Sleeper username" 
                                            size="large"
                                            class="username-input">
                                            <sl-icon name="person-fill" slot="prefix"></sl-icon>
                                        </sl-input>
                                        <sl-select id="season-select" value="2025" size="large">
                                            <sl-option value="2025">2025</sl-option>
                                            <sl-option value="2024">2024</sl-option>
                                            <sl-option value="2023">2023</sl-option>
                                        </sl-select>
                                        <sl-button id="load-user-btn" type="submit" variant="primary" size="large" class="search-button">
                                            <sl-icon name="search"></sl-icon>
                                            Search
                                        </sl-button>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <!-- Error Message -->
                        <div id="user-error" class="error-state" style="display: none;">
                            <sl-icon name="exclamation-triangle-fill" class="error-icon"></sl-icon>
                            <h3>Error</h3>
                            <p id="user-error-text">An error occurred while loading user data.</p>
                        </div>

                        <!-- Loading State -->
                        <div id="loading-leagues" class="loading-state" style="display: none;">
                            <sl-spinner></sl-spinner>
                            <p>Loading your leagues...</p>
                        </div>

                        <!-- Error State -->
                        <div id="error-state" class="error-state" style="display: none;">
                            <sl-icon name="exclamation-triangle-fill" class="error-icon"></sl-icon>
                            <h3>User Not Found</h3>
                            <p>We couldn't find a Sleeper user with that username. Please check the spelling and try again.</p>
                        </div>

                        <!-- Leagues List -->
                        <div id="leagues-container" class="leagues-container" style="display: none;">
                            <div class="leagues-header">
                                <h2>Your Leagues</h2>
                                <div class="user-info">
                                    <sl-avatar id="user-avatar" class="user-avatar"></sl-avatar>
                                    <div class="user-details">
                                        <span id="user-display-name" class="user-name"></span>
                                        <span id="user-username" class="username"></span>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="leagues-list" class="leagues-list">
                                <!-- Leagues will be populated here -->
                            </div>
                            
                            <!-- Empty State -->
                            <div id="leagues-empty" class="empty-state" style="display: none;">
                                <sl-icon name="inbox" class="empty-icon"></sl-icon>
                                <h3>No Leagues Found</h3>
                                <p id="empty-message">No leagues found for this season.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Mock Draft Tab -->
                    <div id="mock-tab" class="tab-pane">
                        <div class="mock-draft-section">
                            <div class="mock-header">
                                <sl-icon name="play-circle-fill" class="mock-icon"></sl-icon>
                                <h2>Mock Draft</h2>
                                <p>Practice your draft strategy with our mock draft simulator</p>
                            </div>
                            
                            <div class="mock-options">
                                <div class="option-card">
                                    <h3>Quick Mock</h3>
                                    <p>Jump into a standard 12-team PPR mock draft</p>
                                    <sl-button variant="primary" size="large">
                                        <sl-icon name="lightning-fill"></sl-icon>
                                        Start Quick Mock
                                    </sl-button>
                                </div>
                                
                                <div class="option-card">
                                    <h3>Custom Mock</h3>
                                    <p>Configure your own mock draft settings</p>
                                    <sl-button variant="default" size="large">
                                        <sl-icon name="gear-fill"></sl-icon>
                                        Configure Mock
                                    </sl-button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Draft Page -->
        <div id="draft-section" class="draft-section" style="display: none;">
            <!-- Draft Header -->
            <div class="draft-header">
                <div class="draft-header-content">
                    <div class="draft-title-section">
                        <button id="back-to-leagues-btn" class="back-button">
                            <sl-icon name="arrow-left"></sl-icon>
                            Back to Leagues
                        </button>
                        <div class="draft-title-info">
                            <h1 id="draft-title">Draft Board</h1>
                            <p id="draft-subtitle">Loading draft information...</p>
                        </div>
                    </div>
                    <div class="draft-controls">
                        <!-- Rankings Selector -->
                        <div class="rankings-selector">
                            <sl-select id="rankings-select" value="" placeholder="Select Rankings" size="medium">
                                <sl-option value="">Loading rankings...</sl-option>
                            </sl-select>
                            <sl-button id="upload-rankings-btn" variant="default" size="medium">
                                <sl-icon name="upload"></sl-icon>
                                Upload CSV
                            </sl-button>
                        </div>
                        
                        <div class="connection-status">
                            <div id="connection-indicator" class="status-indicator offline">
                                <div class="status-dot"></div>
                                <span id="connection-text">Connecting...</span>
                            </div>
                        </div>
                        <button id="toggle-roster-btn" class="roster-toggle-btn">
                            <sl-icon name="people-fill"></sl-icon>
                            <span>Show Roster</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Draft Content -->
            <div class="draft-content">
                <!-- Main Draft Board -->
                <div class="draft-board-container">
                    <!-- Position Tabs -->
                    <div class="position-tabs" id="position-tabs">
                        <!-- Tabs will be populated dynamically based on league -->
                    </div>

                    <!-- Player List -->
                    <div class="players-container">
                        <div class="players-header">
                            <div class="player-rank">Rank</div>
                            <div class="player-name">Player</div>
                            <div class="player-position">Pos</div>
                            <div class="player-team">Team</div>
                            <div class="player-adp">ADP</div>
                            <div class="player-status">Status</div>
                        </div>
                        <div id="players-list" class="players-list">
                            <!-- Players will be populated here -->
                        </div>
                    </div>
                </div>

                <!-- Roster Sidebar -->
                <div id="roster-sidebar" class="roster-sidebar hidden">
                    <div class="roster-header">
                        <h3>My Team</h3>
                        <button id="close-roster-btn" class="close-roster-btn">
                            <sl-icon name="x"></sl-icon>
                        </button>
                    </div>
                    <div class="roster-content">
                        <div class="roster-positions">
                            <div class="roster-position">
                                <div class="position-label">QB</div>
                                <div class="position-slots" data-position="QB">
                                    <div class="roster-slot empty">Empty</div>
                                </div>
                            </div>
                            <div class="roster-position">
                                <div class="position-label">RB</div>
                                <div class="position-slots" data-position="RB">
                                    <div class="roster-slot empty">Empty</div>
                                    <div class="roster-slot empty">Empty</div>
                                </div>
                            </div>
                            <div class="roster-position">
                                <div class="position-label">WR</div>
                                <div class="position-slots" data-position="WR">
                                    <div class="roster-slot empty">Empty</div>
                                    <div class="roster-slot empty">Empty</div>
                                </div>
                            </div>
                            <div class="roster-position">
                                <div class="position-label">TE</div>
                                <div class="position-slots" data-position="TE">
                                    <div class="roster-slot empty">Empty</div>
                                </div>
                            </div>
                            <div class="roster-position">
                                <div class="position-label">FLEX</div>
                                <div class="position-slots" data-position="FLEX">
                                    <div class="roster-slot empty">Empty</div>
                                </div>
                            </div>
                            <div class="roster-position">
                                <div class="position-label">K</div>
                                <div class="position-slots" data-position="K">
                                    <div class="roster-slot empty">Empty</div>
                                </div>
                            </div>
                            <div class="roster-position">
                                <div class="position-label">DEF</div>
                                <div class="position-slots" data-position="DEF">
                                    <div class="roster-slot empty">Empty</div>
                                </div>
                            </div>
                            <div class="roster-position">
                                <div class="position-label">BENCH</div>
                                <div class="position-slots" data-position="BENCH">
                                    <div class="roster-slot empty">Empty</div>
                                    <div class="roster-slot empty">Empty</div>
                                    <div class="roster-slot empty">Empty</div>
                                    <div class="roster-slot empty">Empty</div>
                                    <div class="roster-slot empty">Empty</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- File Upload Dialog -->
    <sl-dialog id="upload-dialog" label="Upload Custom Rankings">
        <div class="upload-form">
            <div class="form-group">
                <label for="ranking-file">Select CSV File</label>
                <input type="file" id="ranking-file" accept=".csv" />
                <small>CSV must contain at least 'Name' and 'Position' columns</small>
            </div>
            
            <div class="form-group">
                <label for="ranking-name">Ranking Name (Optional)</label>
                <sl-input id="ranking-name" placeholder="e.g., My Custom Rankings"></sl-input>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="scoring-type">Scoring Type</label>
                    <sl-select id="scoring-type" value="custom">
                        <sl-option value="standard">Standard</sl-option>
                        <sl-option value="ppr">PPR</sl-option>
                        <sl-option value="half-ppr">Half PPR</sl-option>
                        <sl-option value="custom">Custom</sl-option>
                    </sl-select>
                </div>
                
                <div class="form-group">
                    <label for="format-type">Format</label>
                    <sl-select id="format-type" value="custom">
                        <sl-option value="standard">Standard</sl-option>
                        <sl-option value="superflex">Superflex</sl-option>
                        <sl-option value="custom">Custom</sl-option>
                    </sl-select>
                </div>
            </div>
            
            <div class="upload-preview" id="upload-preview" style="display: none;">
                <h4>Preview:</h4>
                <div id="preview-content"></div>
            </div>
        </div>
        
        <div slot="footer">
            <sl-button variant="default" id="cancel-upload">Cancel</sl-button>
            <sl-button variant="primary" id="confirm-upload" disabled>Upload</sl-button>
        </div>
    </sl-dialog>

    <!-- JavaScript -->
    <script src="/js/api-service.js"></script>
    <script src="/js/services/rankings-service.js"></script>
    <script src="/js/handlers/navigation-handlers.js"></script>
    <script src="/js/handlers/landing-handlers.js"></script>
    <script src="/js/handlers/draft-handlers.js"></script>
    <script src="/js/app-simple.js"></script>
</body>
</html>
